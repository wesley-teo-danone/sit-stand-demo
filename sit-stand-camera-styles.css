/* Basic Reset */
html,
body {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  background: #f9f9f9;
  overscroll-behavior: none;
}
#desktopOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(255, 255, 255, 0.95);
  color: #333;
  display: none; /* will be set to flex via JS if not mobile */
  align-items: center;
  justify-content: center;
  font-size: 20px;
  text-align: center;
  z-index: 10000;
}
#webcam-wrapper {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100dvh;
  overflow: hidden;
}

/*study Details*/

/* Overlay Styling */
#studyVisitOverlay {
  position: fixed;
  inset: 0;
  display: none; /* shown by JS on DOMContentLoaded */
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.97);
  z-index: 10001; /* above other overlays */
}

#studyVisitForm {
  width: min(520px, 90vw);
  display: grid;
  gap: 12px;
  padding: 20px;
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
}

#studyVisitForm h2 {
  margin: 0 0 6px 0;
  font-size: 1.25rem;
  color: #111827;
}

#studyVisitForm label {
  font-size: 0.9rem;
  color: #374151;
  margin-top: 4px;
}

#studyId,
#visitId {
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 1rem;
  outline: none;
}
#studyId:focus,
#visitId:focus {
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
}

#studyVisitSubmit {
  margin-top: 8px;
  padding: 10px 14px;
  background: #2563eb;
  color: white;
  border: 0;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
}

.form-error {
  color: #b91c1c;
  background: #fee2e2;
  border: 1px solid #fecaca;
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 0.9rem;
}

/*end of study details*/

video,
canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 1;
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.4s ease;
}

#spinner {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.loader {
  border: 12px solid #f3f3f3;
  border-top: 12px solid #3498db;
  border-radius: 50%;
  width: 80px;
  height: 80px;
  animation: spin 2s linear infinite;
}
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.spinner-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.loading-text {
  margin-top: 15px;
  font-size: 1.2rem;
  color: #555;
}

.textBox {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 5px;
  padding: 10px;
  font-size: 16px;
  text-align: center;
  color: white;
  position: fixed;

  left: 50%;
  transform: translateX(-50%);
  z-index: 2;
  bottom: calc(40px + env(safe-area-inset-bottom));

  white-space: nowrap;
  display: flex;
  max-width: 100vw;
}

/* === Phase Pill (DOM, iOS-safe) === */
.phase-pill {
  position: absolute;
  top: calc(env(safe-area-inset-top, 0px) + 10px);
  left: 12px; /* overridden by .tc */
  z-index: 4; /* above canvas/video */
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 6px 12px;
  border-radius: 999px;
  font:
    700 12px/1 ui-sans-serif,
    system-ui,
    -apple-system,
    'Segoe UI',
    Roboto;
  letter-spacing: 0.2px;
  color: #e2f6ff; /* text */
  /* glassy background */
  background: linear-gradient(
    180deg,
    rgba(15, 23, 42, 0.52),
    rgba(15, 23, 42, 0.62)
  );
  border: 1px solid rgba(255, 255, 255, 0.16);
  box-shadow: 0 3px 14px rgba(0, 0, 0, 0.35);
  -webkit-backdrop-filter: saturate(140%) blur(8px);
  backdrop-filter: saturate(140%) blur(8px);
  pointer-events: none; /* never capture taps */
  transform: translateZ(0); /* avoid blit issues on iOS */
}

/* subtle top sheen */
.phase-pill::after {
  content: '';
  position: absolute;
  left: 10px;
  right: 10px;
  top: 2px;
  height: 28%;
  border-radius: 999px;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12),
    rgba(255, 255, 255, 0)
  );
  pointer-events: none;
}
.phase-pill.is-hidden {
  opacity: 0;
  transform: translateY(-6px);
  pointer-events: none; /* you already have pointer-events:none globally, safe */
  visibility: hidden; /* prevents accidental focus on some browsers */
}

.phase-pill .dot {
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: #6aed18; /* base */
  box-shadow:
    0 0 0 2px rgba(0, 0, 0, 0.35),
    /* outline for contrast */ 0 0 10px 4px rgba(128, 232, 37, 0.5),
    /* outer glow */ 0 0 2px 1px rgba(255, 255, 255, 0.25); /* crisp inner lift */
}

/* alignment modifiers */
.phase-pill.tl {
  left: 12px;
  transform: translate3d(0, 0, 0);
}
.phase-pill.tc {
  left: 50%;
  transform: translate3d(-50%, 0, 0);
}

/* gentle appear + text change pop */
@keyframes pillIn {
  from {
    opacity: 0;
    transform: translate3d(0, -6px, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}
.phase-pill {
  animation: pillIn 0.18s ease-out;
}
.phase-pill.bump {
  animation: pillIn 0.18s ease-out;
} /* reuse for text changes */

/* scale up on larger phones */
@media (min-width: 420px) {
  .phase-pill {
    font-size: 15px;
    padding: 9px 16px;
  }
}
/* end of phase pill */

#hud.sts-hud {
  position: relative;
  height: var(--hud-height);
  background: transparent;
  z-index: 3; /* harmless; .status-bar has its own stacking */
}

/* Left: reps */
.hud-left {
  display: flex;
  align-items: center;
}
.hud-reps {
  display: flex;
  align-items: baseline;
  gap: 10px;
}
.reps-big {
  font-size: 56px;
  font-weight: 800;
  line-height: 1;
}
.reps-label {
  opacity: 0.85;
  margin-top: 10px;
  font-weight: 600;
}

/* Center: vertical form bars */
.hud-center {
  display: flex;
  justify-content: center;
}
.bars {
  display: flex;
  align-items: flex-end;
  gap: 6px;
  height: 44px;
}
.bars span {
  width: 10px;
  height: 18px; /* can vary per-rep if you like */
  border-radius: 6px;
  background: #333; /* inactive */
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.06) inset;
  transition:
    height 0.2s ease,
    background 0.2s ease,
    transform 0.12s ease;
}
.bars span.active {
  transform: translateY(-2px);
}
.bars span.good {
  background: #22c55e;
} /* green  */
.bars span.ok {
  background: #f59e0b;
} /* amber  */
.bars span.bad {
  background: #ef4444;
} /* red    */

/* Right: timer + button */
.hud-right {
  display: flex;
  align-items: center;
  gap: 12px;
  justify-content: flex-end;
}
.hud-timer {
  font-weight: 700;
  font-size: 18px;
  letter-spacing: 0.5px;
}
.hud-cta {
  background: #2a2a2a;
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: #fff;
  padding: 10px 16px;
  border-radius: 999px;
  font-weight: 600;
}
.hud-cta:active {
  transform: translateY(1px);
}

/* Small phones */
@media (max-width: 380px) {
  :root {
    --hud-height: 80px;
  }
  .reps-big {
    font-size: 48px;
  }
}

/* --- Layout variables --- */
:root {
  --hud-height: 80px; /* HUD band height */
  --cam-gap: 0px; /* top/bottom gap around camera box */
  --corner-radius: 18px; /* camera box rounding */
}

/* Dark background as requested */
html,
body {
  background: #000;
  color: #fff;
}

/* CAMERA BOX: leave a gap at top, and above HUD at bottom */
#webcam-wrapper {
  position: fixed;
  left: 12px;
  right: 12px;
  top: var(--cam-gap);
  bottom: calc(var(--hud-height) + var(--cam-gap));
  border-radius: var(--corner-radius);
  overflow: hidden;
  background: #000; /* black behind video */
  /* remove any explicit height you had (like 100dvh) */
  height: auto !important;
  width: auto;
  z-index: 1;
}

/* Make video & canvas fill the rounded box */
#webcam,
#output_canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover; /* use 'contain' if you prefer letterboxing */
  display: block;
  visibility: hidden;
  opacity: 0; /* your JS flips these to visible */
  transition: opacity 0.4s ease;
}
#webcam {
  z-index: 1;
  background: #000;
}
#output_canvas {
  z-index: 2;
  background: transparent;
}

/* HUD: pin to bottom */
#hud.sts-hud {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--hud-height);
  background: #000;
  z-index: 3;
}

/* Spinner stays on top while loading */
#spinner {
  position: fixed;
  inset: 0;
  z-index: 9999;
}

:root {
  --bg: #000;
  --fg: #fff;
  --muted: rgba(255, 255, 255, 0.65);
  --thin: rgba(255, 255, 255, 0.08);
  --ring: rgba(255, 255, 255, 0.18);
  --good: #22c55e;
  --warn: #f59e0b;
  --bad: #ef4444;
}

/* Bottom Status Bar */
.status-bar {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1000;
  background: var(--bg);
  color: var(--fg);
  border-top: 1px solid var(--thin);
  box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.4);
  padding: 10px 14px calc(10px + env(safe-area-inset-bottom));
}
.status-inner {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 14px;
  max-width: 980px;
  margin: 0 auto;
}

/* Reps */
/* .reps{ display:flex; align-items:center; gap:10px; min-width:0; }
.reps .num{ font-weight:800; font-variant-numeric:tabular-nums; font-size: clamp(22px,3.6vw,28px); line-height:1; }
.reps .label{ font-size:12px; letter-spacing:0.08em; text-transform:uppercase; color:var(--muted); } */

/* Reps — clean, gradient number, no dot/underline */
.reps {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
}

.reps .label {
  font-size: 11px;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--muted);
}

/* Gradient number (iOS-safe) */
.reps .num {
  margin-top: 4px;
  font-weight: 900;
  line-height: 1;
  font-variant-numeric: tabular-nums;
  font-size: clamp(28px, 6vw, 44px);

  /* gradient fill */
  background: linear-gradient(180deg, #eafffb 0%, #7afcff 40%, #22d3ee 100%);
  -webkit-background-clip: text; /* iOS/Safari */
  background-clip: text;
  color: transparent;

  /* subtle depth */
  text-shadow: 0 2px 16px rgba(255, 255, 255, 0.08);
}

/* Remove any previous dot/underline from older styles */
.reps .label::before,
.reps .num::after {
  content: none !important;
  display: none !important;
}

/* Optional “pop” when reps update */
.reps .num.bump {
  animation: repPop 0.28s cubic-bezier(0.2, 0.8, 0.2, 1);
}
@keyframes repPop {
  0% {
    transform: scale(0.88);
    filter: brightness(1.15);
  }
  60% {
    transform: scale(1.06);
  }
  100% {
    transform: scale(1);
  }
}

/* Form */
.form {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 999px;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.03)
  );
  border: 1px solid var(--thin);
  min-width: 180px;
}
.form .label {
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted);
  white-space: nowrap;
}
.form .score {
  font-weight: 700;
  min-width: 2ch;
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.bar-row {
  display: flex;
  align-items: flex-end;
  gap: 6px;
  height: 22px;
}
.bar {
  width: 8px;
  height: 4px;
  border-radius: 3px;
  background: rgba(255, 255, 255, 0.15);
  outline: 1px solid rgba(255, 255, 255, 0.06);
  transition:
    height 160ms ease,
    background-color 160ms ease;
}
.bar.good {
  background: var(--good);
}
.bar.warn {
  background: var(--warn);
}
.bar.bad {
  background: var(--bad);
}

/* Countdown */
.countdown {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 10px;
}
.countdown .label {
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted);
}

.ring {
  position: relative;
  width: 56px;
  height: 56px;
}
.ring svg {
  display: block;
  width: 56px;
  height: 56px;
  overflow: visible;
}

/* Track color */
.ring .track {
  stroke: rgba(255, 255, 255, 0.16);
}

/* Gentle breathing on halo/glow */
.ring .progress-halo,
.ring .progress-glow {
  animation: ringPulse 2.2s ease-in-out infinite;
}

/* Tiny crisp lift on the top stroke */
.ring .progress {
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.35));
}

.ring .time {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: 13px;
  font-weight: 800;
  letter-spacing: 0.3px;
  color: #ecfccb; /* warm lime-ish */
  text-shadow:
    0 0 6px rgba(163, 230, 53, 0.55),
    0 0 16px rgba(250, 204, 21, 0.35);
}

@keyframes ringPulse {
  0% {
    opacity: 0.5;
  }
  50% {
    opacity: 0.7;
  }
  100% {
    opacity: 0.5;
  }
}

/*end ring*/

/* Mobile tweaks */
@media (max-width: 380px) {
  .form .label {
    display: none;
  }
  .status-inner {
    gap: 10px;
  }
  .form {
    min-width: unset;
  }
}
@media (prefers-reduced-motion: reduce) {
  .bar {
    transition: none;
  }
  .ring .progress {
    transition: none;
  }
}

.hidden {
  display: none !important;
}

/* Start button slab living inside the HUD area */
.hud-start {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--hud-height, 100px);
  display: flex;
  align-items: center;
  justify-content: center;
  background: #000;
  border-top: 1px solid rgba(255, 255, 255, 0.07);
  z-index: 1001;
}
.hud-start button {
  -webkit-tap-highlight-color: transparent;
  appearance: none;
  border: 0;
  cursor: pointer;
  padding: 12px 18px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 16px;
  background: linear-gradient(180deg, #10b981, #059669);
  color: #fff;
  box-shadow: 0 6px 20px rgba(16, 185, 129, 0.35);
}

/* Big 3-2-1 overlay seated in the HUD footprint */
.hud-count {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--hud-height, 100px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: #000;
  border-top: 1px solid rgba(255, 255, 255, 0.07);
  z-index: 1002;
  color: #fff;
}
.hud-count-num {
  font-size: clamp(42px, 10vw, 80px);
  font-weight: 900;
  line-height: 1;
  letter-spacing: -0.02em;
}
.hud-count-sub {
  margin-top: 6px;
  opacity: 0.75;
  font-size: 14px;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

/* Ensure your real status bar sits above the camera and under overlays */
.status-bar {
  z-index: 1000;
}

/* Utility */
.hidden {
  display: none !important;
}

/* ===== Results Modal — Clean Final CSS ===== */

/* Overlay */
.rs-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(3px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  padding: env(safe-area-inset-top) 0 env(safe-area-inset-bottom);
}

/* Card */
.rs-card {
  width: 100vw;
  max-width: 100vw;
  margin: 0;
  color: #f8fafc;
  background: linear-gradient(
    145deg,
    rgba(12, 17, 28, 0.96),
    rgba(18, 26, 42, 0.96)
  );
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 14px;
  box-shadow:
    0 20px 60px rgba(0, 0, 0, 0.45),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
  padding: 12px 12px 14px;
  max-height: 88vh;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* Header: title left, close top-right */
.rs-header {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  margin-bottom: 10px;
  padding-right: 44px; /* keep space so title never sits under close */
}
.rs-title-wrap {
  display: flex;
  flex-direction: column;
  gap: 3px;
  min-width: 0;
}
.rs-title {
  font-size: 18px;
  font-weight: 700;
  letter-spacing: 0.2px;
  color: #e2e8f0;
}
.rs-title-one-line {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.rs-close {
  position: absolute;
  top: 1px;
  right: 5px; /* nudge as needed */
  appearance: none;
  border: 0;
  outline: 0;
  cursor: pointer;
  background: rgba(148, 163, 184, 0.12);
  color: #e2e8f0;
  border: 1px solid rgba(255, 255, 255, 0.12);
  padding: 6px 10px;
  border-radius: 10px;
  font-weight: 700;
  font-size: 14px;
  line-height: 1;
}
.rs-close:hover {
  background: rgba(148, 163, 184, 0.2);
}

/* Grid — always 2×2 */
.rs-card .rs-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

/* Metric tiles — vertical: label on top, ring below */
.rs-ring {
  background: rgba(2, 6, 23, 0.45);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 12px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: 8px;
  transition:
    transform 0.12s ease,
    border-color 0.12s ease;
}
.rs-ring:active {
  transform: scale(0.995);
}
.rs-ring:hover {
  border-color: rgba(255, 255, 255, 0.12);
}

.rs-label {
  font-size: 12px;
  color: #e5e7eb;
  font-weight: 700;
  letter-spacing: 0.2px;
}

/* Progress ring */
.rs-ring-figure {
  --deg: 0deg; /* 0..360deg, set via JS */
  --ring-color: #22d3ee; /* per metric */
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  position: relative;
  background: conic-gradient(
    var(--ring-color) var(--deg),
    rgba(148, 163, 184, 0.18) 0
  );
  transition: background 300ms ease;
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.06) inset,
    0 5px 14px rgba(0, 0, 0, 0.35),
    0 0 10px rgba(34, 211, 238, 0.06);
}
.rs-ring-figure::after {
  content: '';
  position: absolute;
  inset: 7px;
  border-radius: 50%;
  background: radial-gradient(
    ellipse at 50% 40%,
    rgba(255, 255, 255, 0.1),
    rgba(255, 255, 255, 0)
  );
}

.rs-ring-inner {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  background: #0b1220;
  color: #f1f5f9;
  font-weight: 800;
  font-size: 13px;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

@media (orientation: landscape) {
  .rs-stat .value {
    font-size: 36px;
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .rs-ring-figure {
    transition: none;
  }
}

/* Hide unused elements if they still exist in markup */
#rs-sub {
  display: none !important;
} /* date/time (not used) */
.rs-desc {
  display: none !important;
} /* old helper text (not used) */

/* === Gradient-glow SVG rings (replaces conic bg) === */
.rs-ring-figure {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  position: relative;
  background: transparent !important; /* kill the old conic fill */
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.06) inset,
    0 5px 14px rgba(0, 0, 0, 0.35);
}
.rs-ring-figure svg {
  display: block;
  width: 100%;
  height: 100%;
  overflow: visible;
  transform: rotate(-90deg);
}

.rs-ring-inner {
  position: absolute; /* sits above the SVG */
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  background: #0b1220;
  color: #f1f5f9;
  font-weight: 800;
  font-size: 13px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  pointer-events: none;
}

/* Accessible fallback if prefers-reduced-motion: still OK */
@media (prefers-reduced-motion: reduce) {
  .rs-ring-figure svg .progress,
  .rs-ring-figure svg .progress-glow,
  .rs-ring-figure svg .progress-halo {
    transition: none;
  }
}
/* Make footer labels pill-shaped again */

/* Footer keeps left/right groups */
.rs-footer {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  padding-top: 14px;
  margin-top: 14px;
  border-top: 1px dashed rgba(148, 163, 184, 0.35);
}

/* Make each stat inline: [Pill Label]: [Big Number] */
.rs-stat {
  display: flex;
  flex-direction: row; /* row instead of column */
  align-items: center; /* align text baselines nicely */
  gap: 8px; /* space between label and number */
  text-align: left;
}

/* Works with either .tag (pill) or .label (plain) */
.rs-stat .tag {
  display: inline-block;
  margin: 0;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}

.rs-stat .label {
  display: inline-block;
  margin: 0;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(148, 163, 184, 0.1);
  color: #94a3b8;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}

/* Add the colon after the label */
.rs-stat .tag::after,
.rs-stat .label::after {
  content: ':';
  margin-left: 4px;
  opacity: 0.8;
}

/* Big value to the right of the label */
.rs-stat .value {
  font-size: 32px; /* nice and visible */
  font-weight: 900;
  line-height: 1.05;
  color: #f8fafc;
}

/* Optional: bump the value size a bit in landscape */
@media (orientation: landscape) {
  .rs-stat .value {
    font-size: 36px;
  }
}

#floatingMessage {
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 40;
  pointer-events: none;

  /* Rectangular shape with curved corners */
  padding: 10px 22px;
  max-width: 120%;
  border-radius: 12px; /* Changed from 999px to 12px (you can adjust this value) */

  /* Red glass + glow */
  background: radial-gradient(
    circle at top,
    rgba(248, 113, 113, 0.3),
    rgba(24, 24, 27, 0.48)
  );
  border: 1px solid rgba(248, 113, 113, 0.95);
  box-shadow:
    0 16px 40px rgba(0, 0, 0, 0.95),
    0 0 18px rgba(248, 113, 113, 0.85);
  backdrop-filter: blur(14px);

  /* Text */
  display: none;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    'SF Pro Text',
    sans-serif;
  font-size: 20px;
  font-weight: 600;
  line-height: 1.35;
  color: #fee2e2; /* soft light-red/white */
  white-space: normal;
}

/* Visible state */
#floatingMessage.angle-visible {
  display: flex;
  animation: anglePulse 1.2s ease-in-out infinite;
}

@keyframes anglePulse {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.03);
    opacity: 0.96;
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}

/* === Calibration HUD: two checks at the bottom === */

.hud-calib {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--hud-height, 100px);

  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;

  background: #000;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding: 8px 14px calc(8px + env(safe-area-inset-bottom));
  z-index: 1001;
}

.hud-calib-item {
  display: inline-flex;
  align-items: center;
  gap: 6px;

  padding: 8px 12px;
  border-radius: 999px;

  background: radial-gradient(
    circle at top left,
    rgba(15, 23, 42, 0.95),
    rgba(15, 23, 42, 0.8)
  );
  border: 1px solid rgba(148, 163, 184, 0.6);
}

/* Left icon: accessibility */
/* .calib-main-icon {
  font-size: 22px;
  color: #e0f2fe;
} */

.calib-main-icon {
  font-size: 22px;
  color: #e0f2fe;

  /* --- ADD THIS TO FIX THE GLITCH --- */
  display: inline-flex; /* Ensure box model works correctly */
  justify-content: center;
  align-items: center;
  width: 24px; /* Fixed width slightly larger than font-size */
  height: 24px; /* Fixed height */
  overflow: hidden; /* Clips the text string (e.g., "accessibility") */
  flex-shrink: 0; /* Prevents the icon from getting squished */
  line-height: 1; /* normalize line-height */
}
/* Right label: "Stand at 45°" */
.calib-label {
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap;
}

/* Status icon: red cross by default */
/* .calib-status-icon {
  font-size: 20px;
  color: #f97373; 
  text-shadow:
    0 0 6px rgba(248,113,113,0.75),
    0 0 1px rgba(0,0,0,0.9);
} */
.calib-status-icon {
  font-size: 20px;
  color: #f97373;
  text-shadow:
    0 0 6px rgba(248, 113, 113, 0.75),
    0 0 1px rgba(0, 0, 0, 0.9);

  /* --- ADD THIS TO FIX THE GLITCH --- */
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: 24px; /* Fixed width matches the other icon for symmetry */
  height: 24px;
  overflow: hidden;
  flex-shrink: 0;
  line-height: 1;
}

/* When an item passes its check: add .ok to the item */
.hud-calib-item.ok {
  background: radial-gradient(
    circle at top left,
    rgba(22, 163, 74, 0.32),
    rgba(15, 23, 42, 0.92)
  );
  border-color: rgba(34, 197, 94, 0.85);
  box-shadow: 0 0 16px rgba(34, 197, 94, 0.55);
}

.hud-calib-item.ok .calib-status-icon {
  color: #22c55e; /* green */
  text-shadow:
    0 0 10px rgba(34, 197, 94, 0.9),
    0 0 1px rgba(0, 0, 0, 0.9);
}

/* Small phones */
@media (max-width: 380px) {
  .hud-calib {
    gap: 10px;
  }
}
